{"version":3,"file":"js/508.0f2288ac.js","mappings":"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","sources":["webpack://client/./src/views/OrderEditForm.vue?18c7","webpack://client/./src/views/OrderEditForm.vue?de9a","webpack://client/./src/views/OrderEditForm.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h2\", { class: \"add-form__header\" }, \"Edytuj zamówienie\", -1)\nconst _hoisted_2 = { class: \"form-order__header\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"add-form__button\",\n  type: \"submit\"\n}, \"Edytuj zamówienie\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_form_group = _resolveComponent(\"form-group\")!\n  const _component_form_group_dropdown = _resolveComponent(\"form-group-dropdown\")!\n  const _component_form_group_select = _resolveComponent(\"form-group-select\")!\n  const _component_order_form_list = _resolveComponent(\"order-form-list\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", {\n    class: \"form-order\",\n    onSubmit: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.submitForm && _ctx.submitForm(...args)))\n  }, [\n    _hoisted_1,\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_form_group, {\n        modelValue: _ctx.advance,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.advance) = $event)),\n        \"label-value\": \"Zaliczka\",\n        \"type-value\": \"number\",\n        \"placeholder-value\": \"Wpisz zaliczkę\",\n        \"name-value\": \"advance\",\n        \"default-value\": _ctx.advance\n      }, null, 8, [\"modelValue\", \"default-value\"]),\n      _createVNode(_component_form_group_dropdown, {\n        modelValue: _ctx.searchCustomer,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.searchCustomer) = $event)),\n        \"search-value\": _ctx.searchCustomer,\n        \"label-value\": \"Klient\",\n        \"type-value\": \"text\",\n        \"placeholder-value\": \"Wpisz nazwę klienta\",\n        \"name-value\": \"company\",\n        \"default-value\": _ctx.customerName,\n        listDropdown: _ctx.$store.getters.getFiltredCustomer(_ctx.searchCustomer),\n        onSelected: _ctx.selectCustomer,\n        onReset: _ctx.isCustomerSelected\n      }, null, 8, [\"modelValue\", \"search-value\", \"default-value\", \"listDropdown\", \"onSelected\", \"onReset\"]),\n      _createVNode(_component_form_group_select, {\n        \"label-value\": \"Status\",\n        \"default-value\": _ctx.status,\n        \"list-dropdown\": [\r\n          'W przygotowaniu',\r\n          'Wysłano',\r\n          'Do odbioru',\r\n          'Odebrano',\r\n        ],\n        onSelected: _cache[2] || (_cache[2] = (item) => (_ctx.status = item))\n      }, null, 8, [\"default-value\"])\n    ]),\n    _createVNode(_component_order_form_list),\n    _hoisted_3\n  ], 32))\n}","\r\nimport { defineComponent, ref } from \"vue\";\r\nimport FormGroup from \"@/components/FormGroup.vue\";\r\nimport FormGroupDropdown from \"@/components/FormGroupDropdown.vue\";\r\nimport FormGroupSelect from \"@/components/FormGroupSelect.vue\";\r\nimport OrderFormList from \"@/components/OrderFormList.vue\";\r\nimport {\r\n  IOrderEditData,\r\n  IOrderFormListElement,\r\n  IOrderPost,\r\n  IOrderPostCommodity,\r\n} from \"@/types\";\r\nimport { useStore } from \"@/store\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport default defineComponent({\r\n  components: { FormGroup, FormGroupDropdown, FormGroupSelect, OrderFormList },\r\n  setup() {\r\n    const store = useStore();\r\n    const route = useRoute();\r\n\r\n    const customerName = ref<string>(\"\");\r\n    const searchCustomer = ref<string>(\"\");\r\n    const customerId = ref<string>(\"\");\r\n    const advance = ref<number>(0);\r\n    const status = ref<string>(\"W przygotowaniu\");\r\n\r\n    const commoditiesList = new Map<string, IOrderFormListElement>();\r\n\r\n    store.dispatch(\"getOrderDetail\", route.params.id).then(() => {\r\n      if (store.state.ordersState.orderDetail) {\r\n        customerName.value = store.state.ordersState.orderDetail.customer.name;\r\n        customerId.value = store.state.ordersState.orderDetail.customer.id;\r\n        advance.value = store.state.ordersState.orderDetail.advance;\r\n        status.value = store.state.ordersState.orderDetail.status;\r\n        store.state.ordersState.orderDetail.commodities.forEach((item) => {\r\n          const id = uuidv4();\r\n\r\n          const parsedElement: IOrderFormListElement = {\r\n            id,\r\n            supplier: item.supplierId,\r\n            supplierName: item.supplierName,\r\n            commodity: item.id,\r\n            commodityName: item.name,\r\n            deliveryCost: item.deliveryPrice,\r\n            price: item.price,\r\n            quantity: item.quantity,\r\n            isCustomerPayForDelivery: item.deliveryPrice > 0,\r\n          };\r\n\r\n          commoditiesList.set(id, parsedElement);\r\n        });\r\n\r\n        store.commit(\"setOrderFormElements\", commoditiesList);\r\n      }\r\n    });\r\n\r\n    return { customerName, customerId, advance, status, searchCustomer };\r\n  },\r\n  mounted() {\r\n    this.$store.dispatch(\"getCustomers\");\r\n    this.$store.dispatch(\"getSuppliers\");\r\n    this.$store.dispatch(\"setCommodities\");\r\n    this.$store.commit(\"resetOrdersElements\");\r\n  },\r\n  methods: {\r\n    selectCustomer(id: string) {\r\n      this.searchCustomer = \"\";\r\n      this.customerId = id;\r\n    },\r\n    isCustomerSelected() {\r\n      if (this.customerId !== \"\") {\r\n        this.customerId = \"\";\r\n      }\r\n    },\r\n    async submitForm(e: Event) {\r\n      e.preventDefault();\r\n\r\n      const commoditiesList = new Array<IOrderPostCommodity>(0);\r\n\r\n      if (this.$store.state.ordersState.ordersFormElements.size > 0) {\r\n        this.$store.state.ordersState.ordersFormElements.forEach((item) => {\r\n          commoditiesList.push({\r\n            commodity: item.commodity,\r\n            supplier: item.supplier,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n            deliveryPrice: item.isCustomerPayForDelivery\r\n              ? item.deliveryCost\r\n              : 0,\r\n          });\r\n        });\r\n      }\r\n\r\n      const data: IOrderPost = {\r\n        customer: this.customerId,\r\n        advance: Number(this.advance),\r\n        status: this.status,\r\n        commodities: commoditiesList,\r\n      };\r\n\r\n      const editData: IOrderEditData = {\r\n        id: this.$route.params.id as string,\r\n        data,\r\n      };\r\n\r\n      await this.$store.dispatch(\"editOrder\", editData);\r\n\r\n      if (!this.$store.state.ordersState.isError) {\r\n        this.$router.replace({ replace: true, path: \"/d/orders\" });\r\n      } else {\r\n        this.$store.commit(\"toggleOrderError\");\r\n      }\r\n    },\r\n  },\r\n});\r\n","import { render } from \"./OrderEditForm.vue?vue&type=template&id=6672a275&ts=true\"\nimport script from \"./OrderEditForm.vue?vue&type=script&lang=ts\"\nexport * from \"./OrderEditForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\wobbo\\\\OneDrive\\\\Pulpit\\\\PR\\\\projects_portfolio\\\\order-app\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","_createElementVNode","class","_hoisted_2","_hoisted_3","type","render","_ctx","_cache","$props","$setup","$data","$options","_component_form_group","_resolveComponent","_component_form_group_dropdown","_component_form_group_select","_component_order_form_list","_openBlock","_createElementBlock","onSubmit","args","submitForm","_createVNode","modelValue","advance","$event","searchCustomer","customerName","listDropdown","$store","getters","getFiltredCustomer","onSelected","selectCustomer","onReset","isCustomerSelected","status","item","defineComponent","components","FormGroup","FormGroupDropdown","FormGroupSelect","OrderFormList","setup","store","useStore","route","useRoute","ref","customerId","commoditiesList","Map","dispatch","params","id","then","state","ordersState","orderDetail","value","customer","name","commodities","forEach","uuidv4","parsedElement","supplier","supplierId","supplierName","commodity","commodityName","deliveryCost","deliveryPrice","price","quantity","isCustomerPayForDelivery","set","commit","mounted","this","methods","async","e","preventDefault","Array","ordersFormElements","size","push","data","Number","editData","$route","isError","$router","replace","path","__exports__"],"sourceRoot":""}