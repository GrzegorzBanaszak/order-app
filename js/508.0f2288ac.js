"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[508],{7210:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var s=r(3396);const o=(0,s._)("h2",{class:"add-form__header"},"Edytuj zamówienie",-1),a={class:"form-order__header"},i=(0,s._)("button",{class:"add-form__button",type:"submit"},"Edytuj zamówienie",-1);function u(e,t,r,u,d,l){const m=(0,s.up)("form-group"),c=(0,s.up)("form-group-dropdown"),n=(0,s.up)("form-group-select"),p=(0,s.up)("order-form-list");return(0,s.wg)(),(0,s.iD)("form",{class:"form-order",onSubmit:t[3]||(t[3]=(...t)=>e.submitForm&&e.submitForm(...t))},[o,(0,s._)("div",a,[(0,s.Wm)(m,{modelValue:e.advance,"onUpdate:modelValue":t[0]||(t[0]=t=>e.advance=t),"label-value":"Zaliczka","type-value":"number","placeholder-value":"Wpisz zaliczkę","name-value":"advance","default-value":e.advance},null,8,["modelValue","default-value"]),(0,s.Wm)(c,{modelValue:e.searchCustomer,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchCustomer=t),"search-value":e.searchCustomer,"label-value":"Klient","type-value":"text","placeholder-value":"Wpisz nazwę klienta","name-value":"company","default-value":e.customerName,listDropdown:e.$store.getters.getFiltredCustomer(e.searchCustomer),onSelected:e.selectCustomer,onReset:e.isCustomerSelected},null,8,["modelValue","search-value","default-value","listDropdown","onSelected","onReset"]),(0,s.Wm)(n,{"label-value":"Status","default-value":e.status,"list-dropdown":["W przygotowaniu","Wysłano","Do odbioru","Odebrano"],onSelected:t[2]||(t[2]=t=>e.status=t)},null,8,["default-value"])]),(0,s.Wm)(p),i],32)}var d=r(4870),l=r(5106),m=r(3778),c=r(9478),n=r(8703),p=r(4997),h=r(2483),v=r(3029),y=(0,s.aZ)({components:{FormGroup:l.Z,FormGroupDropdown:m.Z,FormGroupSelect:c.Z,OrderFormList:n.Z},setup(){const e=(0,p.oR)(),t=(0,h.yj)(),r=(0,d.iH)(""),s=(0,d.iH)(""),o=(0,d.iH)(""),a=(0,d.iH)(0),i=(0,d.iH)("W przygotowaniu"),u=new Map;return e.dispatch("getOrderDetail",t.params.id).then((()=>{e.state.ordersState.orderDetail&&(r.value=e.state.ordersState.orderDetail.customer.name,o.value=e.state.ordersState.orderDetail.customer.id,a.value=e.state.ordersState.orderDetail.advance,i.value=e.state.ordersState.orderDetail.status,e.state.ordersState.orderDetail.commodities.forEach((e=>{const t=(0,v.Z)(),r={id:t,supplier:e.supplierId,supplierName:e.supplierName,commodity:e.id,commodityName:e.name,deliveryCost:e.deliveryPrice,price:e.price,quantity:e.quantity,isCustomerPayForDelivery:e.deliveryPrice>0};u.set(t,r)})),e.commit("setOrderFormElements",u))})),{customerName:r,customerId:o,advance:a,status:i,searchCustomer:s}},mounted(){this.$store.dispatch("getCustomers"),this.$store.dispatch("getSuppliers"),this.$store.dispatch("setCommodities"),this.$store.commit("resetOrdersElements")},methods:{selectCustomer(e){this.searchCustomer="",this.customerId=e},isCustomerSelected(){""!==this.customerId&&(this.customerId="")},async submitForm(e){e.preventDefault();const t=new Array(0);this.$store.state.ordersState.ordersFormElements.size>0&&this.$store.state.ordersState.ordersFormElements.forEach((e=>{t.push({commodity:e.commodity,supplier:e.supplier,quantity:e.quantity,price:e.price,deliveryPrice:e.isCustomerPayForDelivery?e.deliveryCost:0})}));const r={customer:this.customerId,advance:Number(this.advance),status:this.status,commodities:t},s={id:this.$route.params.id,data:r};await this.$store.dispatch("editOrder",s),this.$store.state.ordersState.isError?this.$store.commit("toggleOrderError"):this.$router.replace({replace:!0,path:"/d/orders"})}}}),f=r(89);const C=(0,f.Z)(y,[["render",u]]);var S=C}}]);
//# sourceMappingURL=508.0f2288ac.js.map