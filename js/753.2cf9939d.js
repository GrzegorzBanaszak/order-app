"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[753],{6468:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var s=r(3396);const o=(0,s._)("h2",{class:"add-form__header"},"Dodaj nowe zamówienie",-1),a={class:"form-order__header"},u=(0,s._)("button",{class:"add-form__button",type:"submit"},"Dodaj",-1);function d(e,t,r,d,l,i){const m=(0,s.up)("form-group"),c=(0,s.up)("form-group-dropdown"),n=(0,s.up)("form-group-select"),p=(0,s.up)("order-form-list");return(0,s.wg)(),(0,s.iD)("form",{class:"form-order",onSubmit:t[3]||(t[3]=(...t)=>e.submitForm&&e.submitForm(...t))},[o,(0,s._)("div",a,[(0,s.Wm)(m,{modelValue:e.advance,"onUpdate:modelValue":t[0]||(t[0]=t=>e.advance=t),"label-value":"Zaliczka","type-value":"number","placeholder-value":"Wpisz zaliczkę","name-value":"advance"},null,8,["modelValue"]),(0,s.Wm)(c,{modelValue:e.searchCustomer,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchCustomer=t),"search-value":e.searchCustomer,"label-value":"Klient","type-value":"text","placeholder-value":"Wpisz nazwę klienta","name-value":"company",listDropdown:e.$store.getters.getFiltredCustomer(e.searchCustomer),onSelected:e.selectCustomer,onReset:e.isCustomerSelected},null,8,["modelValue","search-value","listDropdown","onSelected","onReset"]),(0,s.Wm)(n,{"label-value":"Status","list-dropdown":["W przygotowaniu","Wysłano","Do odbioru","Odebrano"],onSelected:t[2]||(t[2]=t=>e.status=t)})]),(0,s.Wm)(p),u],32)}var l=r(5106),i=r(3778),m=r(9478),c=r(8703),n=(0,s.aZ)({components:{FormGroup:l.Z,FormGroupDropdown:i.Z,FormGroupSelect:m.Z,OrderFormList:c.Z},mounted(){this.$store.dispatch("getCustomers"),this.$store.dispatch("getSuppliers"),this.$store.dispatch("setCommodities"),this.$store.commit("resetOrdersElements")},data(){return{advance:0,searchCustomer:"",customerId:"",status:"W przygotowaniu"}},methods:{selectCustomer(e){this.searchCustomer="",this.customerId=e},isCustomerSelected(){""!==this.customerId&&(this.customerId="")},async submitForm(e){e.preventDefault();const t=new Array(0);this.$store.state.ordersState.ordersFormElements.size>0&&this.$store.state.ordersState.ordersFormElements.forEach((e=>{t.push({commodity:e.commodity,supplier:e.supplier,quantity:e.quantity,price:e.price,deliveryPrice:e.isCustomerPayForDelivery?e.deliveryCost:0})}));const r={customer:this.customerId,advance:Number(this.advance),status:this.status,commodities:t};await this.$store.dispatch("addOrder",r),this.$store.state.ordersState.isError?this.$store.commit("toggleOrderError"):this.$router.replace({replace:!0,path:"/d/orders"})}}}),p=r(89);const h=(0,p.Z)(n,[["render",d]]);var v=h}}]);
//# sourceMappingURL=753.2cf9939d.js.map